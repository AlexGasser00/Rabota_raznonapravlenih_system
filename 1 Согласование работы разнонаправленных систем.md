### Входные переменные

T_room — текущая температура в помещении
Setpoint_heat — уставка температуры для отопления
Setpoint_cool — уставка температуры для охлаждения
ΔT — зона нечувствительности (например, ±1°C), чтобы избежать частого переключения
Heat_state — текущее состояние отопления (ВКЛ/ВЫКЛ)
Cool_state — текущее состояние охлаждения (ВКЛ/ВЫКЛ)
Heat_ready — готовность системы отопления (ДА/НЕТ)
Cool_ready — готовность системы охлаждения (ДА/НЕТ)

### Выходные переменные

Heat_cmd — разрешение/запрет на работу отопления
Cool_cmd — разрешение/запрет на работу охлаждения

### Описание алгоритма

Алгоритм получает значения T_room, уставки (Setpoint_heat, Setpoint_cool) и статусы систем.

**Проверка готовности:**

Если Heat_ready = НЕТ, то Heat_cmd = ЗАПРЕТ независимо от температуры.
Если Cool_ready = НЕТ, то Cool_cmd = ЗАПРЕТ независимо от температуры.
Если Heat_state = ВКЛ, то алгоритм выставляет Cool_cmd = ЗАПРЕТ.
Если Cool_state = ВКЛ, то алгоритм выставляет Heat_cmd = ЗАПРЕТ.
Если обе системы находятся в состоянии «готовность», алгоритм определяет режим работы:
Если T_room < Setpoint_heat – ΔT → разрешить отопление (Heat_cmd = РАЗРЕШЕНО), запретить охлаждение.
Если T_room > Setpoint_cool + ΔT → разрешить охлаждение (Cool_cmd = РАЗРЕШЕНО), запретить отопление.
Если T_room находится в диапазоне [Setpoint_heat … Setpoint_cool] → обе системы выключены (режим ожидания).  

При смене режима алгоритм накладывает задержку переключения (например, 3–5 минут), чтобы избежать частого включения/выключения оборудования.



### Блок схема

```
<mxGraphModel>
  <root>
    <mxCell id="0"/>
    <mxCell id="1" parent="0"/>

    <!-- Начало -->
    <mxCell id="2" value="Начало" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
      <mxGeometry x="300" y="40" width="120" height="60" as="geometry"/>
    </mxCell>

    <!-- Проверка готовности -->
    <mxCell id="3" value="Проверка готовности систем (Heat_ready, Cool_ready)" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1">
      <mxGeometry x="255" y="125" width="210" height="110" as="geometry"/>
    </mxCell>

    <!-- Не готово -->
    <mxCell id="4" value="Если не готово → запрет команд" style="rectangle;whiteSpace=wrap;html=1;" vertex="1" parent="1">
      <mxGeometry x="520" y="150" width="220" height="60" as="geometry"/>
    </mxCell>

    <!-- Проверка статусов -->
    <mxCell id="5" value="Heat_state=ВКЛ → запрет Cool_cmd&lt;br&gt;Cool_state=ВКЛ → запрет Heat_cmd" style="rectangle;whiteSpace=wrap;html=1;" vertex="1" parent="1">
      <mxGeometry x="240" y="260" width="240" height="80" as="geometry"/>
    </mxCell>

    <!-- Проверка отопления -->
    <mxCell id="6" value="T_room &lt; Setpoint_heat – ΔT?" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1">
      <mxGeometry x="265" y="370" width="190" height="110" as="geometry"/>
    </mxCell>

    <!-- Разрешить отопление -->
    <mxCell id="7" value="Heat_cmd=РАЗРЕШЕНО, Cool_cmd=ЗАПРЕТ" style="rectangle;whiteSpace=wrap;html=1;" vertex="1" parent="1">
      <mxGeometry x="520" y="390" width="220" height="60" as="geometry"/>
    </mxCell>

    <!-- Проверка охлаждения -->
    <mxCell id="8" value="T_room &gt; Setpoint_cool + ΔT?" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1">
      <mxGeometry x="265" y="520" width="190" height="110" as="geometry"/>
    </mxCell>

    <!-- Разрешить охлаждение -->
    <mxCell id="9" value="Cool_cmd=РАЗРЕШЕНО, Heat_cmd=ЗАПРЕТ" style="rectangle;whiteSpace=wrap;html=1;" vertex="1" parent="1">
      <mxGeometry x="520" y="540" width="220" height="60" as="geometry"/>
    </mxCell>

    <!-- Ожидание -->
    <mxCell id="10" value="Обе системы выключены (ожидание)" style="rectangle;whiteSpace=wrap;html=1;" vertex="1" parent="1">
      <mxGeometry x="240" y="670" width="240" height="60" as="geometry"/>
    </mxCell>

    <!-- Задержка -->
    <mxCell id="11" value="Задержка переключения (3-5 мин)" style="rectangle;whiteSpace=wrap;html=1;" vertex="1" parent="1">
      <mxGeometry x="240" y="780" width="240" height="60" as="geometry"/>
    </mxCell>

    <!-- Конец -->
    <mxCell id="12" value="Конец" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
      <mxGeometry x="300" y="890" width="120" height="60" as="geometry"/>
    </mxCell>

    <!-- Связи -->
    <mxCell id="13" edge="1" source="2" target="3" parent="1">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="14" edge="1" source="3" target="4" parent="1">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="15" edge="1" source="3" target="5" parent="1">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="16" edge="1" source="5" target="6" parent="1">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="17" edge="1" source="6" target="7" parent="1">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="18" edge="1" source="6" target="8" parent="1">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="19" edge="1" source="8" target="9" parent="1">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="20" edge="1" source="8" target="10" parent="1">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="21" edge="1" source="10" target="11" parent="1">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="22" edge="1" source="11" target="12" parent="1">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>

  </root>
</mxGraphModel>


```